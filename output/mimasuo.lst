C51 COMPILER V9.01   MIMASUO                                                               11/25/2022 22:50:26 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MIMASUO
OBJECT MODULE PLACED IN .\output\mimasuo.obj
COMPILER INVOKED BY: C:\Keil_v5-79\C51\BIN\C51.EXE mimasuo.c COMPACT BROWSE INCDIR(.\driver) DEBUG OBJECTEXTEND CODE SYM
                    -BOLS PRINT(.\output\mimasuo.lst) PREPRINT(.\output\mimasuo.i) OBJECT(.\output\mimasuo.obj)

line level    source

   1          // mimalocker.c
   2          
   3          #include "24c02.h"
   4          #include "i2c.h"
   5          #include "key.h"
   6          #include "lcd1602.h"
   7          #include "serial.h"
   8          #include "ds18b20.h"
   9          
  10          
  11          char test[]="hello";
  12          char buff[20]={0};
  13          
  14          
  15          void main()
  16          {
  17   1      //      lcd1602Init();
  18   1              serialInit();
  19   1      //      WP = 0;
  20   1      //      C02WriteMutiBytes(0x00,5,test);
  21   1      
  22   1      //      WP =1;
  23   1      //      delay(10);
  24   1      //      WP =1;
  25   1      //      WP = 1;
  26   1      //    delay(300);
  27   1      //      C02ReadMutiBytes(0,5,buff);  //
  28   1      //      lcd1602WriteString(0,1,5,buff); 
  29   1      //   I2C_Start();
  30   1      //   I2C_WriteByte(C02WADDR);
  31   1      //   I2C_CheckACK();
  32   1      //   I2C_WriteByte(0x11);
  33   1      //   I2C_CheckACK();
  34   1      //   I2C_WriteByte(0x55);
  35   1      //   I2C_CheckACK();
  36   1      //
  37   1      //   I2C_Stop();
  38   1      //   C02WriteByte(0x11,0x55);
  39   1      //   delay(300);        //µÈ´ýÐ´Íê³É
  40   1      //   C02ReadByte(0x00);
  41   1      //   C02ReadByte(0x01);
  42   1      //   C02ReadByte(0x02);
  43   1         
  44   1              
  45   1      //      serialSendByte('0');
  46   1      //      serialSendString(test);
  47   1      //      lcd1602WriteChar(1,1,'a');
  48   1      
  49   1      
  50   1              while(1)
  51   1              {
  52   2      //      uchar keyValue =0xFF;
  53   2      ////    serialSendString(test);
  54   2      //       keyValue =  getKey();
C51 COMPILER V9.01   MIMASUO                                                               11/25/2022 22:50:26 PAGE 2   

  55   2      //              if(0xff != keyValue){   
  56   2      ////                serialSendByte(keyValue);
  57   2      //                      lcd1602WriteChar(0,0,keyValue+'0');
  58   2      //              }
  59   2      //      unsigned value = ds18b20ReadTemperature(devId);
  60   2              unsigned value = ds18b20ReadTemperature();
  61   2              uchar temp1 = (uchar)(value/255);
  62   2              uchar temp2 = (uchar)(value%255);
  63   2              //serialSendByte(temp1);
  64   2              serialSendByte('a');
  65   2               
  66   2              
  67   2              };
  68   1      
  69   1      }
C51 COMPILER V9.01   MIMASUO                                                               11/25/2022 22:50:26 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 15
                                           ; SOURCE LINE # 16
                                           ; SOURCE LINE # 18
0000 120000      E     LCALL   serialInit
0003         ?C0001:
                                           ; SOURCE LINE # 50
                                           ; SOURCE LINE # 51
                                           ; SOURCE LINE # 60
0003 120000      E     LCALL   ds18b20ReadTemperature
0006 7800        R     MOV     R0,#LOW value
0008 EE                MOV     A,R6
0009 F2                MOVX    @R0,A
000A 08                INC     R0
000B EF                MOV     A,R7
000C F2                MOVX    @R0,A
                                           ; SOURCE LINE # 61
000D 18                DEC     R0
000E E2                MOVX    A,@R0
000F FA                MOV     R2,A
0010 08                INC     R0
0011 E2                MOVX    A,@R0
0012 FB                MOV     R3,A
0013 7C00              MOV     R4,#00H
0015 7DFF              MOV     R5,#0FFH
0017 FF                MOV     R7,A
0018 AE02              MOV     R6,AR2
001A 120000      E     LCALL   ?C?UIDIV
001D 7800        R     MOV     R0,#LOW temp1
001F EF                MOV     A,R7
0020 F2                MOVX    @R0,A
                                           ; SOURCE LINE # 62
0021 7C00              MOV     R4,#00H
0023 7DFF              MOV     R5,#0FFH
0025 AF03              MOV     R7,AR3
0027 AE02              MOV     R6,AR2
0029 120000      E     LCALL   ?C?UIDIV
002C 7800        R     MOV     R0,#LOW temp2
002E ED                MOV     A,R5
002F F2                MOVX    @R0,A
                                           ; SOURCE LINE # 64
0030 7F61              MOV     R7,#061H
0032 120000      E     LCALL   _serialSendByte
                                           ; SOURCE LINE # 67
0035 80CC              SJMP    ?C0001
             ; FUNCTION main (END)

C51 COMPILER V9.01   MIMASUO                                                               11/25/2022 22:50:26 PAGE 4   

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
P3 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B0H  1
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
serialInit . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
ds18b20ReadTemperature . . . . . . . .  EXTERN   CODE   PROC     -----  -----
buff . . . . . . . . . . . . . . . . .  PUBLIC   PDATA  ARRAY    0000H  20
main . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  value. . . . . . . . . . . . . . . .  AUTO     PDATA  U_INT    0000H  2
  temp1. . . . . . . . . . . . . . . .  AUTO     PDATA  U_CHAR   0002H  1
  temp2. . . . . . . . . . . . . . . .  AUTO     PDATA  U_CHAR   0003H  1
_serialSendByte. . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
SCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0098H  1
TCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0088H  1
test . . . . . . . . . . . . . . . . .  PUBLIC   PDATA  ARRAY    0014H  6
T2CON. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     55    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =     26       4
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
