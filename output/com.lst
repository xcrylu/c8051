C51 COMPILER V9.01   COM                                                                   11/25/2022 22:50:27 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE COM
OBJECT MODULE PLACED IN .\output\com.obj
COMPILER INVOKED BY: C:\Keil_v5-79\C51\BIN\C51.EXE driver\com.c COMPACT BROWSE INCDIR(.\driver) DEBUG OBJECTEXTEND CODE 
                    -SYMBOLS PRINT(.\output\com.lst) PREPRINT(.\output\com.i) OBJECT(.\output\com.obj)

line level    source

   1          //com.c
   2          #include "com.h"
   3          //************延时函数************
   4          void  delay(uint  i)                                    //延时函数
   5          {
   6   1              uint  j;
   7   1              for  (j=0;j<i;j++){}
   8   1      }
   9          
  10          void delayus(uint i ) 
  11          {                       
  12   1              while(i--){          
  13   2                  _nop_();     
  14   2          }                   
  15   1      }
  16          
  17          void delayms(uint i)
  18          {
  19   1              TMOD =((TMOD&0x0F)|0x01);//定时器0，16位定时
  20   1              TH0 = (65536 - msCount)/256;
  21   1              TL0 = (65536 - msCount)%256;
  22   1              TR0 = 1;            //启动定时器0
  23   1              while(i--){
  24   2                      while(TF0==0){     //1ms定时             
  25   3                              TH0 = (65536 - msCount)/256;
  26   3                              TL0 = (65536 - msCount)%256;
  27   3                              TF0=1;
  28   3                      }
  29   2              }
  30   1              TR0 = 0; //停止定时器0
  31   1      }
C51 COMPILER V9.01   COM                                                                   11/25/2022 22:50:27 PAGE 2   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION _delay (BEGIN)
                                           ; SOURCE LINE # 4
;---- Variable 'i' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 5
                                           ; SOURCE LINE # 7
;---- Variable 'j' assigned to Register 'R4/R5' ----
0000 E4                CLR     A
0001 FD                MOV     R5,A
0002 FC                MOV     R4,A
0003         ?C0001:
0003 C3                CLR     C
0004 ED                MOV     A,R5
0005 9F                SUBB    A,R7
0006 EC                MOV     A,R4
0007 9E                SUBB    A,R6
0008 5007              JNC     ?C0004
000A 0D                INC     R5
000B BD0001            CJNE    R5,#00H,?C0013
000E 0C                INC     R4
000F         ?C0013:
000F 80F2              SJMP    ?C0001
                                           ; SOURCE LINE # 8
0011         ?C0004:
0011 22                RET     
             ; FUNCTION _delay (END)

             ; FUNCTION _delayus (BEGIN)
                                           ; SOURCE LINE # 10
;---- Variable 'i' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 11
0000         ?C0005:
                                           ; SOURCE LINE # 12
0000 EF                MOV     A,R7
0001 1F                DEC     R7
0002 AC06              MOV     R4,AR6
0004 7001              JNZ     ?C0014
0006 1E                DEC     R6
0007         ?C0014:
0007 4C                ORL     A,R4
0008 6003              JZ      ?C0007
                                           ; SOURCE LINE # 13
000A 00                NOP     
                                           ; SOURCE LINE # 14
000B 80F3              SJMP    ?C0005
                                           ; SOURCE LINE # 15
000D         ?C0007:
000D 22                RET     
             ; FUNCTION _delayus (END)

             ; FUNCTION _delayms (BEGIN)
                                           ; SOURCE LINE # 17
;---- Variable 'i' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 18
                                           ; SOURCE LINE # 19
0000 E589              MOV     A,TMOD
0002 540F              ANL     A,#0FH
0004 4401              ORL     A,#01H
0006 F589              MOV     TMOD,A
                                           ; SOURCE LINE # 20
C51 COMPILER V9.01   COM                                                                   11/25/2022 22:50:27 PAGE 3   

0008 758CFC            MOV     TH0,#0FCH
                                           ; SOURCE LINE # 21
000B 758A1C            MOV     TL0,#01CH
                                           ; SOURCE LINE # 22
000E D28C              SETB    TR0
0010         ?C0008:
                                           ; SOURCE LINE # 23
0010 EF                MOV     A,R7
0011 1F                DEC     R7
0012 AC06              MOV     R4,AR6
0014 7001              JNZ     ?C0015
0016 1E                DEC     R6
0017         ?C0015:
0017 4C                ORL     A,R4
0018 600D              JZ      ?C0009
001A         ?C0010:
                                           ; SOURCE LINE # 24
001A 208DF3            JB      TF0,?C0008
                                           ; SOURCE LINE # 25
001D 758CFC            MOV     TH0,#0FCH
                                           ; SOURCE LINE # 26
0020 758A1C            MOV     TL0,#01CH
                                           ; SOURCE LINE # 27
0023 D28D              SETB    TF0
                                           ; SOURCE LINE # 28
0025 80F3              SJMP    ?C0010
                                           ; SOURCE LINE # 29
0027         ?C0009:
                                           ; SOURCE LINE # 30
0027 C28C              CLR     TR0
                                           ; SOURCE LINE # 31
0029 22                RET     
             ; FUNCTION _delayms (END)

C51 COMPILER V9.01   COM                                                                   11/25/2022 22:50:27 PAGE 4   

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
P3 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B0H  1
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
_delay . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2
  j. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0004H  2
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
SCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0098H  1
TMOD . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0089H  1
TCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0088H  1
TF0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008DH  1
TH0. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008CH  1
TL0. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008AH  1
TR0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008CH  1
T2CON. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
_delayms . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1
_delayus . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     74    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
